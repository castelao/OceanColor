[tox]
envlist = py{37,38,39}-numpy{117,121}-pandas{100,103}-xarray{16,19}-loky{28,30}

[travis]
python =
    3.8: py38
    3.9: py39
    3.7: py37

[testenv:flake8]
basepython = python
deps = flake8
commands = flake8 OceanColor tests

[testenv]
setenv =
    PYTHONPATH = {toxinidir}:{toxinidir}/OceanColor
    OBJC_DISABLE_INITIALIZE_FORK_SAFETY = YES

commands =
    pip install -U pip
    pytest --basetemp={envtmpdir}

deps =
    pytest>=5.4
    numpy121: numpy>=1.21,<1.22
    numpy122: numpy>=1.22,<1.23
    numpy123: numpy>=1.23
    pandas12: pandas>=1.2,<1.3
    pandas13: pandas>=1.3,<1.4
    pandas14: pandas>=1.4
    xarray18: xarray>=0.18,<0.19
    xarray19: xarray>=0.19
    loky29: loky>=2.9,<3.0
    loky30: loky>=3.0,<3.1
    loky31: loky>=3.1

sitepackages = False
